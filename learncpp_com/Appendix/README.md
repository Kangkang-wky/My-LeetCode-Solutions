## A.1 Static and dynamic libraries

### A static library (also known as an archive)

由编译并直接链接到程序中的例程组成。当您编译使用静态库的程序时，程序使用的静态库的所有功能都将成为可执行文件的一部分。在 Windows 上，静态库通常具有 .lib 扩展名，而在 Linux 上，静态库通常具有 .a（存档）扩展名。静态库的一个优点是，您只需分发可执行文件即可供用户运行您的程序。由于库成为程序的一部分，因此可确保程序始终使用正确版本的库。此外，由于静态库成为程序的一部分，因此您可以像使用为您自己的程序编写的功能一样使用它们。缺点是，由于库的副本成为使用它的每个可执行文件的一部分，这会导致大量空间浪费。静态库也不能轻易升级 - 要更新库，需要替换整个可执行文件。


### A dynamic library (also called a shared library)

由运行时加载到应用程序中的例程组成。当您编译使用动态库的程序时，该库不会成为可执行文件的一部分 - 它仍然是一个单独的单元。在 Windows 上，动态库通常具有 .dll（动态链接库）扩展名，而在 Linux 上，动态库通常具有 .so（共享对象）扩展名。动态库的一个优点是许多程序可以共享一个副本，从而节省空间。也许更大的优点是动态库可以升级到较新的版本，而无需替换使用它的所有可执行文件。

由于动态库未链接到您的程序中，因此使用动态库的程序必须显式加载并与动态库交互。这种机制可能会造成混淆，并使与动态库交互变得很麻烦。为了使动态库更易于使用，可以使用导入库。

### An import library

### Guide

如果使用动态库，请确保程序知道在哪里找到它们。在 Linux 下，库通常安装到 /usr/lib，这是LD_LIBRARY_PATH 环境变量中路径后的默认搜索路径。在 Windows 上，默认搜索路径包括程序运行的目录、通过调用 SetDllDirectory() 设置的目录、Windows、System 和 System32 目录以及 PATH 环境变量中的目录。使用 .dll 的最简单方法是将 .dll 复制到可执行文件的位置。由于您通常会将 .dll 与可执行文件一起分发，因此将它们放在一起是有意义的。